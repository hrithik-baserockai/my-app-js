### Test File Generated by User
```js
import React from 'react';
import { render, screen, fireEvent, waitFor, act } from '@testing-library/react';
import '@testing-library/jest-dom';
import { BrowserRouter } from 'react-router-dom';
import CreateCompany from '../../../src/screens/recruiter/CreateCompany';

// Mock dependencies
jest.mock('react-router-dom', () => ({
  ...jest.requireActual('react-router-dom'),
  useNavigate: () => jest.fn(),
  Link: ({ children, to }) => <a href={to}>{children}</a>
}));

// Mock toast before using it
const mockToastError = jest.fn();
const mockToastSuccess = jest.fn();

jest.mock('react-toastify', () => ({
  toast: {
    error: mockToastError,
    success: mockToastSuccess
  }
}));

jest.mock('../../../src/components/all/header/Header', () => ({
  __esModule: true,
  default: ({ category, showOnlyLogo, menu }) => (
    <div data-testid="header-mock">
      <span>Header Component</span>
      <div data-testid="menu-container">{menu}</div>
    </div>
  )
}));

jest.mock('../../../src/components/all/SideBar', () => ({
  __esModule: true,
  default: () => <div data-testid="sidebar-mock">Sidebar Component</div>
}));

jest.mock('../../../src/components/all/header/Menu', () => ({
  __esModule: true,
  default: () => <div data-testid="menu-mock">Menu Component</div>
}));

// Mock API functions
const mockGetData = jest.fn().mockResolvedValue('mock-token');
const mockAPI = jest.fn();

jest.mock('../../../src/lib/core', () => ({
  __esModule: true,
  getData: mockGetData,
  API: mockAPI,
  API_METHODS: {
    POST: 'POST'
  },
  COMPANY_API: {
    POST_CREATE_COMPANY_PROFILE: '/api/company/create',
    POST_UPLOAD_COMPANY_PIC: '/api/company/upload-pic'
  },
  data: {
    ACCESS_TOKEN: 'access_token'
  }
}));

// Mock fetch
global.fetch = jest.fn();

// Mock FileReader
class MockFileReader {
  constructor() {
    this.result = null;
    this.onloadend = null;
  }

  readAsDataURL(file) {
    this.result = 'data:image/jpeg;base64,mockbase64data';
    // Use setTimeout to simulate async behavior
    setTimeout(() => {
      if (this.onloadend) {
        this.onloadend();
      }
    }, 0);
  }
}

// Replace global FileReader with mock
global.FileReader = MockFileReader;

describe('CreateCompany Component', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  // Helper function to render component with router
  const renderComponent = () => {
    return render(
      <BrowserRouter>
        <CreateCompany />
      </BrowserRouter>
    );
  };

  test('renders component with all required elements', () => {
    renderComponent();

    // Check main structural elements
    expect(screen.getByTestId('header-mock')).toBeInTheDocument();
    expect(screen.getByTestId('sidebar-mock')).toBeInTheDocument();
    expect(screen.getByTestId('menu-mock')).toBeInTheDocument();

    // Check form elements
    expect(screen.getByText('Company Details')).toBeInTheDocument();
    expect(screen.getByPlaceholderText('Full Company Name')).toBeInTheDocument();
    expect(screen.getByPlaceholderText("Founder's Name(s)")).toBeInTheDocument();
    expect(screen.getByPlaceholderText('About Company')).toBeInTheDocument();

    // Check buttons
    expect(screen.getByText('Skip')).toBeInTheDocument();
    expect(screen.getByText('Save and Exit')).toBeInTheDocument();
    expect(screen.getByText('Save and Continue')).toBeInTheDocument();
  });

  test('displays default company logo', () => {
    renderComponent();
    const logoImg = screen.getByAltText('Company Logo');
    expect(logoImg).toBeInTheDocument();
    expect(logoImg).toHaveAttribute('src', 'https://sproutsweb-assets.s3.amazonaws.com/common-assets/VerificationPage/enterprise.png');
  });

  test('updates form state when company name input changes', () => {
    renderComponent();
    const companyNameInput = screen.getByPlaceholderText('Full Company Name');

    fireEvent.change(companyNameInput, { target: { value: 'Test Company' } });

    expect(companyNameInput.value).toBe('Test Company');
  });

  test('updates form state when founder name input changes', () => {
    renderComponent();
    const founderNameInput = screen.getByPlaceholderText("Founder's Name(s)");

    fireEvent.change(founderNameInput, { target: { value: 'John Doe' } });

    expect(founderNameInput.value).toBe('John Doe');
  });

  test('updates form state when about company textarea changes', () => {
    renderComponent();
    const aboutCompanyTextarea = screen.getByPlaceholderText('About Company');

    fireEvent.change(aboutCompanyTextarea, {
      target: { value: 'This is a test company description.' }
    });

    expect(aboutCompanyTextarea.value).toBe('This is a test company description.');
  });

  test('handles file upload and updates image preview', async () => {
    renderComponent();

    const file = new File(['dummy content'], 'test.png', { type: 'image/png' });
    const fileInput = screen.getByLabelText(/Replace/i);

    await act(async () => {
      fireEvent.change(fileInput, { target: { files: [file] } });
    });

    // Wait for state update
    await waitFor(() => {
      const logoImg = screen.getByAltText('Company Logo');
      expect(logoImg).toHaveAttribute('src', 'data:image/jpeg;base64,mockbase64data');
    });
  });

  test('calls createNewCompanyPost when Save and Continue button is clicked', async () => {
    mockAPI.mockResolvedValueOnce({ data: { company: '123' } });
    global.fetch.mockResolvedValueOnce({
      json: jest.fn().mockResolvedValueOnce({ success: true })
    });

    renderComponent();

    // Fill out the form
    fireEvent.change(screen.getByPlaceholderText('Full Company Name'), {
      target: { value: 'Test Company' }
    });
    fireEvent.change(screen.getByPlaceholderText("Founder's Name(s)"), {
      target: { value: 'John Doe' }
    });

    // Click the Save and Continue button
    await act(async () => {
      fireEvent.click(screen.getByText('Save and Continue'));
    });

    // Verify API was called with correct data
    expect(mockAPI).toHaveBeenCalledWith(
      'POST',
      '/api/company/create',
      1,
      {
        name: 'Test Company',
        founder: 'John Doe',
        size: ' ',
        about: ' ',
        links: ' '
      }
    );
  });

  test('calls createNewCompanyPost when Save and Exit button is clicked', async () => {
    mockAPI.mockResolvedValueOnce({ data: { company: '123' } });
    global.fetch.mockResolvedValueOnce({
      json: jest.fn().mockResolvedValueOnce({ success: true })
    });

    renderComponent();

    // Fill out the form
    fireEvent.change(screen.getByPlaceholderText('Full Company Name'), {
      target: { value: 'Test Company' }
    });

    // Click the Save and Exit button
    await act(async () => {
      fireEvent.click(screen.getByText('Save and Exit'));
    });

    // Verify API was called
    expect(mockAPI).toHaveBeenCalled();
  });

  test('handles successful company creation and navigates back', async () => {
    const navigateMock = jest.fn();
    jest.spyOn(require('react-router-dom'), 'useNavigate').mockImplementation(() => navigateMock);

    mockAPI.mockResolvedValueOnce({ data: { company: '123' } });
    global.fetch.mockResolvedValueOnce({
      json: jest.fn().mockResolvedValueOnce({ success: true })
    });

    renderComponent();

    // Fill out the form
    fireEvent.change(screen.getByPlaceholderText('Full Company Name'), {
      target: { value: 'Test Company' }
    });

    // Submit the form
    await act(async () => {
      fireEvent.click(screen.getByText('Save and Continue'));
    });

    // Verify navigation occurred
    expect(navigateMock).toHaveBeenCalledWith(-1, { replace: true });
  });

  test('handles API error during company creation', async () => {
    // Mock API to return error
    mockAPI.mockResolvedValueOnce({ error: 'Failed to create company' });

    renderComponent();

    // Fill out the form
    fireEvent.change(screen.getByPlaceholderText('Full Company Name'), {
      target: { value: 'Test Company' }
    });

    // Submit the form
    await act(async () => {
      fireEvent.click(screen.getByText('Save and Continue'));
    });

    // Verify API was called but no navigation occurred
    expect(mockAPI).toHaveBeenCalled();
  });

  test('handles file upload error', async () => {
    // Mock successful company creation
    mockAPI.mockResolvedValueOnce({ data: { company: '123' } });

    // Mock file upload error
    global.fetch.mockResolvedValueOnce({
      json: jest.fn().mockResolvedValueOnce({ error: 'Upload failed' })
    });

    renderComponent();

    // Add a file
    const file = new File(['dummy content'], 'test.png', { type: 'image/png' });
    const fileInput = screen.getByLabelText(/Replace/i);

    await act(async () => {
      fireEvent.change(fileInput, { target: { files: [file] } });
    });

    // Fill required fields
    fireEvent.change(screen.getByPlaceholderText('Full Company Name'), {
      target: { value: 'Test Company' }
    });

    // Submit the form
    await act(async () => {
      fireEvent.click(screen.getByText('Save and Continue'));
    });

    // Wait for the fetch to complete
    await waitFor(() => {
      expect(global.fetch).toHaveBeenCalled();
    });

    // Verify toast.error was called with the error message
    expect(mockToastError).toHaveBeenCalled();
  });

  test('validates required fields before submission', async () => {
    // Reset any previous mock calls
    mockAPI.mockReset();

    // Mock the form's onSubmit prevention
    const preventDefaultMock = jest.fn();

    renderComponent();

    // Try to submit without filling required fields
    const form = screen.getByRole('form');

    await act(async () => {
      fireEvent.submit(form, { preventDefault: preventDefaultMock });
    });

    // Since we're not actually submitting the form (just clicking the button),
    // we need to verify the API wasn't called
    expect(mockAPI).not.toHaveBeenCalled();
  });

  test('submits form with all fields filled', async () => {
    mockAPI.mockResolvedValueOnce({ data: { company: '123' } });
    global.fetch.mockResolvedValueOnce({
      json: jest.fn().mockResolvedValueOnce({ success: true })
    });

    renderComponent();

    // Fill all form fields
    fireEvent.change(screen.getByPlaceholderText('Full Company Name'), {
      target: { value: 'Test Company' }
    });
    fireEvent.change(screen.getByPlaceholderText("Founder's Name(s)"), {
      target: { value: 'John Doe' }
    });
    fireEvent.change(screen.getByPlaceholderText('About Company'), {
      target: { value: 'This is a test company.' }
    });

    // Submit the form
    await act(async () => {
      fireEvent.click(screen.getByText('Save and Continue'));
    });

    // Verify API was called with all field values
    expect(mockAPI).toHaveBeenCalledWith(
      'POST',
      '/api/company/create',
      1,
      {
        name: 'Test Company',
        founder: 'John Doe',
        size: ' ',
        about: 'This is a test company.',
        links: ' '
      }
    );
  });

  test('calls submitFileData with correct company ID after successful creation', async () => {
    mockAPI.mockResolvedValueOnce({ data: { company: '123' } });
    global.fetch.mockResolvedValueOnce({
      json: jest.fn().mockResolvedValueOnce({ success: true })
    });

    renderComponent();

    // Add a file
    const file = new File(['dummy content'], 'test.png', { type: 'image/png' });
    const fileInput = screen.getByLabelText(/Replace/i);

    await act(async () => {
      fireEvent.change(fileInput, { target: { files: [file] } });
    });

    // Fill required fields and submit
    fireEvent.change(screen.getByPlaceholderText('Full Company Name'), {
      target: { value: 'Test Company' }
    });
    fireEvent.change(screen.getByPlaceholderText("Founder's Name(s)"), {
      target: { value: 'John Doe' }
    });

    await act(async () => {
      fireEvent.click(screen.getByText('Save and Continue'));
    });

    // Verify fetch was called with correct parameters for file upload
    await waitFor(() => {
      expect(global.fetch).toHaveBeenCalledWith(
        '/api/company/upload-pic',
        expect.objectContaining({
          method: 'POST',
          headers: expect.objectContaining({
            Authorization: 'Bearer mock-token',
            cid: '123'
          }),
          body: expect.any(FormData)
        })
      );
    });
  });

  test('Skip link navigates to previous page', () => {
    renderComponent();

    const skipLink = screen.getByText('Skip');
    expect(skipLink).toHaveAttribute('href', '-1');
  });
});
```

### Error details
```txt
CreateCompany Component › handles undefined response from API

    TypeError: core.API is not a function

      65 |   const createNewCompanyPost = async () => {
      66 |     /* eslint-disable */console.log(...oo_oo(`4151439199_66_4_66_33_4`,formcompany.name));
    > 67 |     const json = await core.API(
         |                             ^
      68 |       core.API_METHODS.POST,
      69 |       core.COMPANY_API.POST_CREATE_COMPANY_PROFILE,
      70 |       1,

      at API (src/screens/recruiter/CreateCompany.js:67:29)
      at call (src/screens/recruiter/CreateCompany.js:2:1)
      at Generator.tryCatch (src/screens/recruiter/CreateCompany.js:2:1)
      at Generator._invoke [as next] (src/screens/recruiter/CreateCompany.js:2:1)
      at asyncGeneratorStep (src/screens/recruiter/CreateCompany.js:2:1)
      at asyncGeneratorStep (src/screens/recruiter/CreateCompany.js:2:1)
      at _next (src/screens/recruiter/CreateCompany.js:2:1)
      at src/screens/recruiter/CreateCompany.js:2:1
      at apply (src/screens/recruiter/CreateCompany.js:65:29)
      at HTMLUnknownElement.callCallback (node_modules/react-dom/cjs/react-dom.development.js:4164:14)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at invokeGuardedCallbackAndCatchFirstError (node_modules/react-dom/cjs/react-dom.development.js:4291:25)
      at executeDispatch (node_modules/react-dom/cjs/react-dom.development.js:9041:3)
      at processDispatchQueueItemsInOrder (node_modules/react-dom/cjs/react-dom.development.js:9073:7)
      at processDispatchQueue (node_modules/react-dom/cjs/react-dom.development.js:9086:5)
      at dispatchEventsForPlugins (node_modules/react-dom/cjs/react-dom.development.js:9097:3)
      at node_modules/react-dom/cjs/react-dom.development.js:9288:12
      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom.development.js:26140:12)
      at batchedUpdates (node_modules/react-dom/cjs/react-dom.development.js:3991:12)
      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom.development.js:9287:3)
      at dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay (node_modules/react-dom/cjs/react-dom.development.js:6465:5)
      at dispatchEvent (node_modules/react-dom/cjs/react-dom.development.js:6457:5)
      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom.development.js:6430:5)
      at node_modules/@testing-library/dom/dist/events.js:25:20
      at node_modules/@testing-library/react/dist/pure.js:79:16
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:78:28)
      at fireEvent (node_modules/@testing-library/dom/dist/events.js:16:35)
      at Function.fireEvent.<computed> [as click] (node_modules/@testing-library/dom/dist/events.js:125:36)
      at Function.fireEvent.<computed> [as click] (node_modules/@testing-library/react/dist/fire-event.js:18:52)
      at click (__tests__/screens/recruiter/CreateCompany.baserock.test.js:463:15)
      at call (__tests__/screens/recruiter/CreateCompany.baserock.test.js:2:1)
      at Generator.tryCatch (__tests__/screens/recruiter/CreateCompany.baserock.test.js:2:1)
      at Generator._invoke [as next] (__tests__/screens/recruiter/CreateCompany.baserock.test.js:2:1)
      at asyncGeneratorStep (__tests__/screens/recruiter/CreateCompany.baserock.test.js:2:1)
      at asyncGeneratorStep (__tests__/screens/recruiter/CreateCompany.baserock.test.js:2:1)
      at _next (__tests__/screens/recruiter/CreateCompany.baserock.test.js:2:1)
      at Object.<anonymous> (__tests__/screens/recruiter/CreateCompany.baserock.test.js:2:1)

  ● CreateCompany Component › handles undefined response from API

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    Ignored nodes: comments, script, style
    <html>
      <head />
      <body>
        <div>
          <div
            class="page recruiter-pages"
            id="createCompany"
          >
            <div
              data-testid="mock-header"
            >
              <div>
                Category: 
                recruiter
              </div>
              <div>
                ShowOnlyLogo: 
                false
              </div>
              <div
                data-testid="mock-menu"
              >
                Menu
              </div>
            </div>
            <div
              data-testid="mock-sidebar"
            >
              Sidebar
            </div>
            <main
              class="main-content no-padding col-xs-12"
            >
              <div
                class="sub-container"
              >
                <h1
                  class="headingText"
                >
                  Company Details
                </h1>
                <form
                  class="col-xs-12 no-padding"
                >
                  <div
                    class="col-xs-12 col-md-3 no-padding left-section"
                  >
                    <img
                      alt="Company Logo"
                      class="img-responsive company_logo"
                      src="https://sproutsweb-assets.s3.amazonaws.com/common-assets/VerificationPage/enterprise.png"
                    />
                    <input
                      class="hide"
                      hidden=""
                      id="logo"
                      name="logo"
                      type="file"
                    />
                    <label
                      for="logo"
                    >
                      <svg
                        fill="none"
                        height="24"
                        viewBox="0 0 24 24"
                        width="24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M16.862 4.48725L19.5 7.12525M18 14.0002V18.7502C18 19.347 17.7629 19.9193 17.341 20.3412C16.919 20.7632 16.3467 21.0002 15.75 21.0002H5.25C4.65326 21.0002 4.08097 20.7632 3.65901 20.3412C3.23705 19.9193 3 19.347 3 18.7502V8.25025C3 7.65351 3.23705 7.08121 3.65901 6.65926C4.08097 6.2373 4.65326 6.00025 5.25 6.00025H10M16.862 4.48725L18.549 2.79925C18.9007 2.44757 19.3777 2.25 19.875 2.25C20.3723 2.25 20.8493 2.44757 21.201 2.79925C21.5527 3.15092 21.7502 3.6279 21.7502 4.12525C21.7502 4.62259 21.5527 5.09957 21.201 5.45125L10.582 16.0702C10.0533 16.5986 9.40137 16.987 8.685 17.2002L6 18.0002L6.8 15.3152C7.01328 14.5989 7.40163 13.9469 7.93 13.4182L16.862 4.48725V4.48725Z"
                          stroke="#0B53DD"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.5"
                        />
                      </svg>
                       
                      <span>
                        Replace
                      </span>
                       
                    </label>
                  </div>
                  <div
                    class="col-xs-12 col-md-8 no-padding right-section"
                  >
                    <label
                      class="col-xs-12 no-padding"
                      for="companyName"
                      required=""
                    >
                      Company Name
                    </label>
                    <input
                      class="col-xs-12 no-padding"
                      name="companyName"
                      placeholder="Full Company Name"
                      required=""
                      type="text"
                      value=""
                    />
                    <label
                      class="col-xs-12 no-padding"
                      for="founder"
                      required=""
                    >
                      Founder Name
                    </label>
                    <input
                      class="col-xs-12 no-padding"
                      name="founder"
                      placeholder="Founder's Name(s)"
                      required=""
                      type="text"
                      value=" "
                    />
                    <label
                      class="col-xs-12 no-padding"
                      for="aboutCompany"
                    >
                      About Company
                    </label>
                    <textarea
                      class="col-xs-12"
                      cols="3"
                      id="aboutCompany"
                      name="aboutCompany"
                      placeholder="About Company"
                      rows="10"
                    >
                       
                    </textarea>
                  </div>
                </form>
                <div
                  class="controller col-xs-12 no-padding"
                >
                  <a
                    href="-1"
                  >
                    Skip
                  </a>
                  <button
                    class="right"
                    type="submit"
                  >
                    <span
                      class="label"
                    >
                      Save and Exit
                    </span>
                  </button>
                  <button
                    class="right"
                    type="submit"
                  >
                    <span
                      class="label"
                    >
                      Save and Continue
                    </span>
                  </button>
                </div>
              </div>
            </main>
          </div>
        </div>
      </body>
    </html>

      465 |     // This should not throw an error
      466 |     await waitFor(() => {
    > 467 |       expect(mockAPI).toHaveBeenCalled();
          |                       ^
      468 |     });
      469 |   });
      470 | });

      at toHaveBeenCalled (__tests__/screens/recruiter/CreateCompany.baserock.test.js:467:23)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:52:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:141:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:133:16)
```

### CreateNewCompanyPost Method
```js
const createNewCompanyPost = async () => {
  console.log(formcompany.name);
  const json = await core.API(
    core.API_METHODS.POST,
    core.COMPANY_API.POST_CREATE_COMPANY_PROFILE,
    1,
    {
      name: formcompany.name,
      founder: formcompany.founder,
      size: formcompany.size,
      about: formcompany.about,
      links: formcompany.links,
    },
  );
  console.log("JSON:", json);
  if (json.data) {
    // Success
    console.log(json.data);
    nav(-1, { replace: true });
    submitFileData(json?.data?.company);
  } else {
    console.log("error");
    // Error
  }
};
```

### Core API Method
```
// API

export const API = async (method, endpoint, token, body, content_type) => {
  let response = null;
  let options = null;
  if (token === 0) {
    let ps_id = await getData(data.PS_ID);
    options = {
      method: method,
      headers: {
        "Content-Type": content_type ?? "application/json",
        Ps: ps_id,
      },
      retries: 0,
      retryDelay: 3000,
    };
    if (method !== API_METHODS.GET) {
      options.body = JSON.stringify(body);
    }
    console.log("response", options, options.body);
    response = await fetch(endpoint, options);
  } else if (token == 2) {
    const urlParams = new URLSearchParams(window.location.search);
    const tokenFromQuery = urlParams.get("token");
    let ps_id = await getData(data.PS_ID);
    options = {
      method: method,
      headers: {
        "Content-Type": content_type ?? "application/json",
        Ps: ps_id,
        Authorization: "Bearer " + tokenFromQuery,
      },
      retries: 0,
      retryDelay: 3000,
    };
    if (method !== API_METHODS.GET) {
      options.body = JSON.stringify(body);
    }
    console.log("response", options, options.body);
    response = await fetch(endpoint, options);
  } else {
    let ps_id = await getData(data.PS_ID);
    options = {
      method: method,
      headers: {
        "Content-Type": content_type ?? "application/json",
        Authorization: "Bearer " + (await getData(data.ACCESS_TOKEN)),
        Ps: ps_id,
      },
      retries: 0,
      retryDelay: 3000,
    };
    if (method !== API_METHODS.GET) {
      options.body = JSON.stringify(body);
    }
    response = await fetch(endpoint, options);
  }
  let x = await response.json();
  if (x?.message === "Token Expired") {
    logout();
    // window.location.replace("/login");
    return;
  }
  return x;
};
```